<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="popup.css">
    <title>AI Prompt Manager</title>
</head>
<body>
    <div id="app-container">

        <!-- View 1: List of Prompts (Default View) -->
        <div id="prompt-list-view">
            <h2>My Prompts</h2>
            <div id="import-export-controls" style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #eee;">
                <button id="export-prompts-btn" title="Export all prompts to a JSON file">Export Prompts</button>
                <button id="import-prompts-btn" title="Import prompts from a JSON file">Import Prompts</button>
                <input type="file" id="import-file-input" accept=".json" style="display: none;">
            </div>
            <ul id="prompt-list">
                <!-- Prompt list items will be dynamically added here -->
            </ul>
            <button id="add-prompt-btn" title="Add New Prompt">+</button>
        </div>

        <!-- View 2: Input for Selected Prompt (Initially Hidden) -->
        <div id="prompt-input-view" style="display: none;">
            <h3>Selected Prompt: <span id="selected-prompt-title"></span></h3>
            <label for="user-input">User Input (text and/or paste image):</label>
            <div id="user-input" contenteditable="true" aria-placeholder="Paste or type your text here..."></div>
            <button id="copy-output-btn" disabled>Copy Output</button>
            <button id="back-to-list-btn">Back</button>
        </div>

        <!-- View 3: Add/Edit Prompt Form (Initially Hidden) -->
        <div id="add-edit-view" style="display: none;">
            <h3 id="add-edit-title">Add New Prompt</h3>
            <label for="prompt-title-input">Title:</label>
            <input type="text" id="prompt-title-input" placeholder="E.g., Summarize Text">
            <label for="prompt-text-input">System Prompt Text:</label>
            <textarea id="prompt-text-input" placeholder="Enter the core instruction for the AI (e.g., You are a helpful assistant that summarizes text.)"></textarea>
            <button id="save-prompt-btn">Save</button>
            <button id="cancel-add-edit-btn">Cancel</button>
        </div>

    </div>

    <script src="logger.js"></script>
    <script src="storageManager.js"></script>
    <!-- uiManager.js needs to be loaded before popup.js uses it -->
    <script src="uiManager.js"></script>
    <script src="version-checker.js"></script>
    <script src="popup.js"></script>
</body>
</html>